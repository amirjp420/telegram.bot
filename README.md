# telegram.bot
set the orders from customers
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters, ConversationHandler, CallbackContext import csv import os from datetime import datetime  PRODUCT, QUANTITY, ADDRESS = range(3)  class OrderBot:     def __init__(self, token: str):         self.token = token         self.updater = Updater(token=token, use_context=True)         dp = self.updater.dispatcher          conv = ConversationHandler(             entry_points=[CommandHandler('order', self.start_order)],             states={                 PRODUCT: [MessageHandler(Filters.text & ~Filters.command, self.get_product)],                 QUANTITY: [MessageHandler(Filters.text & ~Filters.command, self.get_quantity)],                 ADDRESS: [MessageHandler(Filters.text & ~Filters.command, self.get_address)],             },             fallbacks=[CommandHandler('cancel', self.cancel)]         )          dp.add_handler(conv)         dp.add_handler(CommandHandler('start', self.start))      def start(self, update, context):         update.message.reply_text('سلام! برای سفارش /order بزن.')      def start_order(self, update, context):         update.message.reply_text('نام محصول:')         return PRODUCT      def get_product(self, update, context):         context.user_data['product'] = update.message.text         update.message.reply_text('تعداد:')         return QUANTITY      def get_quantity(self, update, context):         context.user_data['quantity'] = update.message.text         update.message.reply_text('آدرس:')         return ADDRESS      def get_address(self, update, context):         context.user_data['address'] = update.message.text         file = 'orders.csv'         exists = os.path.exists(file)         with open(file, 'a', newline='', encoding='utf-8') as f:             w = csv.writer(f)             if not exists:                 w.writerow(['محصول', 'تعداد', 'آدرس', 'زمان'])             w.writerow([                 context.user_data['product'],                 context.user_data['quantity'],                 context.user_data['address'],                 datetime.now().strftime('%Y-%m-%d %H:%M')             ])         update.message.reply_text('سفارش ثبت شد!')         return ConversationHandler.END      def cancel(self, update, context):         update.message.reply_text('لغو شد.')         return ConversationHandler.END      def run(self):         print("بات شروع شد...")         self.updater.start_polling()         self.updater.idle()  if __name__ == '__main__':     TOKEN = "8096240326:AAFJf3zjZQpfuzTQIBaydLIJyCuexvzJYFc
"
